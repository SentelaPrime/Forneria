{% extends 'base.html' %}
{% load static %}

{% block contenido %}

<div class="dashboard-main-container">
    <!-- Sidebar -->
    <nav class="dashboard-sidebar">
        <div class="sidebar-header">
            <h2 class="sidebar-title">FornerÃ­a</h2>
        </div>
        <ul class="sidebar-menu">
            <li class="sidebar-item">
                <a href="{% url 'home' %}" class="sidebar-link">
                    <span>ğŸ“Š</span> Dashboard
                </a>
            </li>
            <li class="sidebar-item">
                <a href="{% url 'ventas:lista_ventas' %}" class="sidebar-link active">
                    <span>ğŸ›’</span> Ventas
                </a>
            </li>
            <li class="sidebar-item">
                <a href="{% url 'ventas:lista_productos' %}" class="sidebar-link">
                    <span>ğŸ“¦</span> Inventario
                </a>
            </li>
            <li class="sidebar-item">
                <a href="{% url 'ventas:nuevo_producto' %}" class="sidebar-link">
                    <span>â•</span> Agregar Producto
                </a>
            </li>
            <li class="sidebar-item">
                <a href="{% url 'ventas:ver_reporte' %}" class="sidebar-link">
                    <span>ğŸ“ˆ</span> Reportes
                </a>
            </li>
            {% if request.user.is_authenticated and request.user.is_superuser %}
            <li class="sidebar-item">
                <a href="{% url 'usuarios_list' %}" class="sidebar-link">
                    <span>ğŸ‘¥</span> Usuarios
                </a>
            </li>
            {% endif %}
        </ul>
        <div class="sidebar-footer">
            <a href="#" class="sidebar-link">
                <span>âš™ï¸</span> ConfiguraciÃ³n
            </a>
        </div>
    </nav>

<div class="dashboard-content">
    <div class="container mt-4 page-ventas-bg">
    <h2>ğŸ“‹ Lista de Ventas</h2>

    <!-- BotÃ³n para ir al formulario de nueva venta -->
    <a href="{% url 'ventas:nueva_venta' %}" class="btn btn-primary btn-new-sale">+ Registrar Nueva Venta</a>

    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>ID</th>
                <th>Fecha</th>
                <th>Cliente</th>
                <th>MÃ©todo de pago</th>
                <th>Productos</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            {% for venta in ventas %}
            <tr>
                <td>{{ venta.id }}</td>
                <td>{{ venta.fecha|date:"d/m/Y H:i" }}</td>
                <td>{{ venta.cliente_nombre }}</td>
                <td>{{ venta.metodo_pago }}</td>
                <td class="products">
                    {% for item in venta.items.all %}
                        <div>{{ item.producto.nombre }} 
                            <span class="subtotal"> ${{ item.precio_unitario }}</span> Ã— {{ item.cantidad }}
                        </div>
                    {% endfor %}
                </td>
                <td class="total-cell">${{ venta.total|floatformat:2 }}</td>
            </tr>
            {% empty %}
            <tr><td colspan="6" class="text-center">No hay ventas registradas.</td></tr>
            {% endfor %}
        </tbody>
    </table>
    </div>
</div>

{% endblock %}



